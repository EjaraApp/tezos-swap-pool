parameter (or (or (map %add_oracles address string) (or (address %change_admin) (unit %clean_pool))) (or (or (list %remove_oracles address) (pair %request_tezos_exchange (mutez %amount) (pair (map %cryptos string string) (string %key)))) (or (pair %request_tezos_swap (pair (address %address) (mutez %amount)) (pair (string %crypto) (string %key))) (unit %update_pool))));
storage   (pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))));
code
  {
    DUP;        # pair @parameter @storage : pair @parameter @storage
    CDR;        # @storage : pair @parameter @storage
    SWAP;       # pair @parameter @storage : @storage
    CAR;        # @parameter : @storage
    IF_LEFT
      {
        IF_LEFT
          {
            # == add_oracles ==
            # sp.verify(sp.pack(sp.set_type_expr(self.data.admin, sp.TAddress)) == sp.pack(sp.set_type_expr(sp.sender, sp.TAddress)), message = 'Invalid Admin!') # @parameter%add_oracles : @storage
            SENDER;     # address : @parameter%add_oracles : @storage
            PACK;       # bytes : @parameter%add_oracles : @storage
            DIG 2;      # @storage : bytes : @parameter%add_oracles
            DUP;        # @storage : @storage : bytes : @parameter%add_oracles
            DUG 3;      # @storage : bytes : @parameter%add_oracles : @storage
            CAADR;      # address : bytes : @parameter%add_oracles : @storage
            PACK;       # bytes : bytes : @parameter%add_oracles : @storage
            COMPARE;    # int : @parameter%add_oracles : @storage
            EQ;         # bool : @parameter%add_oracles : @storage
            IF
              {}
              {
                PUSH string "Invalid Admin!"; # string : @parameter%add_oracles : @storage
                FAILWITH;   # FAILED
              }; # @parameter%add_oracles : @storage
            # for oracle in params.oracles.keys(): ... # @parameter%add_oracles : @storage
            DUP;        # @parameter%add_oracles : @parameter%add_oracles : @storage
            ITER
              {
                CAR;        # address : @parameter%add_oracles : @storage
                # self.data.oracles[oracle] = params.oracles[oracle] # address : @parameter%add_oracles : @storage
                DIG 2;      # @storage : address : @parameter%add_oracles
                DUP;        # @storage : @storage : address : @parameter%add_oracles
                CAR;        # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage : address : @parameter%add_oracles
                SWAP;       # @storage : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                CDR;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                DUP;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                CDR;        # pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                SWAP;       # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                CAR;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                DUP;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                CAR;        # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                SWAP;       # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                CDR;        # map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%add_oracles
                DIG 4;      # address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                DIG 5;      # @parameter%add_oracles : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUP;        # @parameter%add_oracles : @parameter%add_oracles : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUG 6;      # @parameter%add_oracles : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                SWAP;       # address : @parameter%add_oracles : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                DUP;        # address : address : @parameter%add_oracles : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                DUG 2;      # address : @parameter%add_oracles : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                GET;        # option string : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                IF_SOME
                  {
                    # of_some: Get-item:61 # @some : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                  }
                  {
                    PUSH int 61; # int : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                    FAILWITH;   # FAILED
                  }; # @some : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                SOME;       # option string : address : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                SWAP;       # address : option string : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                UPDATE;     # map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                SWAP;       # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                PAIR;       # pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                PAIR;       # pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%add_oracles
                SWAP;       # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%add_oracles
                PAIR;       # pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))) : @parameter%add_oracles
                SWAP;       # @parameter%add_oracles : pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))))
              }; # @parameter%add_oracles : @storage
            DROP;       # @storage
          }
          {
            IF_LEFT
              {
                # == change_admin ==
                # sp.verify(sp.pack(sp.set_type_expr(self.data.spare, sp.TAddress)) == sp.pack(sp.set_type_expr(sp.sender, sp.TAddress)), message = 'Invalid Spare!') # @parameter%change_admin : @storage
                SENDER;     # address : @parameter%change_admin : @storage
                PACK;       # bytes : @parameter%change_admin : @storage
                DIG 2;      # @storage : bytes : @parameter%change_admin
                DUP;        # @storage : @storage : bytes : @parameter%change_admin
                DUG 3;      # @storage : bytes : @parameter%change_admin : @storage
                CDDAR;      # address : bytes : @parameter%change_admin : @storage
                PACK;       # bytes : bytes : @parameter%change_admin : @storage
                COMPARE;    # int : @parameter%change_admin : @storage
                EQ;         # bool : @parameter%change_admin : @storage
                IF
                  {}
                  {
                    PUSH string "Invalid Spare!"; # string : @parameter%change_admin : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%change_admin : @storage
                SWAP;       # @storage : @parameter%change_admin
                # self.data.admin = params.admin # @storage : @parameter%change_admin
                DUP;        # @storage : @storage : @parameter%change_admin
                CDR;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @storage : @parameter%change_admin
                SWAP;       # @storage : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%change_admin
                CAR;        # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%change_admin
                DUP;        # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%change_admin
                CDR;        # pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%change_admin
                SWAP;       # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%change_admin
                CAAR;       # map string string : pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%change_admin
                DIG 3;      # @parameter%change_admin : map string string : pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))
                SWAP;       # map string string : @parameter%change_admin : pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))
                PAIR;       # pair (map string string) @parameter%change_admin : pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))
                PAIR;       # pair (pair (map string string) @parameter%change_admin) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))
                PAIR;       # pair (pair (pair (map string string) @parameter%change_admin) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))))
              }
              {
                DROP;       # @storage
                # == clean_pool ==
                # sp.verify(self.data.oracles.contains(sp.sender), message = 'Invalid Oracle!') # @storage
                DUP;        # @storage : @storage
                CDADR;      # map address string : @storage
                SENDER;     # address : map address string : @storage
                MEM;        # bool : @storage
                IF
                  {}
                  {
                    PUSH string "Invalid Oracle!"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
              }; # pair (pair (pair (map string string) @parameter%change_admin) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))))
          }; # @storage
      }
      {
        IF_LEFT
          {
            IF_LEFT
              {
                # == remove_oracles ==
                # sp.verify(sp.pack(sp.set_type_expr(self.data.admin, sp.TAddress)) == sp.pack(sp.set_type_expr(sp.sender, sp.TAddress)), message = 'Invalid Admin!') # @parameter%remove_oracles : @storage
                SENDER;     # address : @parameter%remove_oracles : @storage
                PACK;       # bytes : @parameter%remove_oracles : @storage
                DIG 2;      # @storage : bytes : @parameter%remove_oracles
                DUP;        # @storage : @storage : bytes : @parameter%remove_oracles
                DUG 3;      # @storage : bytes : @parameter%remove_oracles : @storage
                CAADR;      # address : bytes : @parameter%remove_oracles : @storage
                PACK;       # bytes : bytes : @parameter%remove_oracles : @storage
                COMPARE;    # int : @parameter%remove_oracles : @storage
                EQ;         # bool : @parameter%remove_oracles : @storage
                IF
                  {}
                  {
                    PUSH string "Invalid Admin!"; # string : @parameter%remove_oracles : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%remove_oracles : @storage
                # for oracle in params.oracles: ... # @parameter%remove_oracles : @storage
                DUP;        # @parameter%remove_oracles : @parameter%remove_oracles : @storage
                ITER
                  {
                    # if self.data.oracles.contains(oracle): # address : @parameter%remove_oracles : @storage
                    DIG 2;      # @storage : address : @parameter%remove_oracles
                    DUP;        # @storage : @storage : address : @parameter%remove_oracles
                    DUG 3;      # @storage : address : @parameter%remove_oracles : @storage
                    CDADR;      # map address string : address : @parameter%remove_oracles : @storage
                    SWAP;       # address : map address string : @parameter%remove_oracles : @storage
                    DUP;        # address : address : map address string : @parameter%remove_oracles : @storage
                    DUG 2;      # address : map address string : address : @parameter%remove_oracles : @storage
                    MEM;        # bool : address : @parameter%remove_oracles : @storage
                    IF
                      {
                        # del self.data.oracles[oracle] # address : @parameter%remove_oracles : @storage
                        DIG 2;      # @storage : address : @parameter%remove_oracles
                        DUP;        # @storage : @storage : address : @parameter%remove_oracles
                        CAR;        # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage : address : @parameter%remove_oracles
                        SWAP;       # @storage : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        CDR;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        DUP;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        CDR;        # pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        SWAP;       # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        CAR;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        DUP;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        CAR;        # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        SWAP;       # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        CDR;        # map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        NONE string; # option string : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : address : @parameter%remove_oracles
                        DIG 5;      # address : option string : map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%remove_oracles
                        UPDATE;     # map address string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%remove_oracles
                        SWAP;       # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%remove_oracles
                        PAIR;       # pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%remove_oracles
                        PAIR;       # pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%remove_oracles
                        SWAP;       # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : @parameter%remove_oracles
                        PAIR;       # pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))) : @parameter%remove_oracles
                        SWAP;       # @parameter%remove_oracles : pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))))
                      }
                      {
                        DROP;       # @parameter%remove_oracles : @storage
                      }; # @parameter%remove_oracles : pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))))
                  }; # @parameter%remove_oracles : @storage
                DROP;       # @storage
              }
              {
                # == request_tezos_exchange ==
                # for crypto in params.cryptos.keys(): ... # @parameter%request_tezos_exchange : @storage
                DUP;        # @parameter%request_tezos_exchange : @parameter%request_tezos_exchange : @storage
                CDAR;       # map string string : @parameter%request_tezos_exchange : @storage
                ITER
                  {
                    CAR;        # string : @parameter%request_tezos_exchange : @storage
                    # sp.verify(self.data.accepted_cryptos.contains(crypto), message = 'Invalid Crypto!') # string : @parameter%request_tezos_exchange : @storage
                    DIG 2;      # @storage : string : @parameter%request_tezos_exchange
                    DUP;        # @storage : @storage : string : @parameter%request_tezos_exchange
                    DUG 3;      # @storage : string : @parameter%request_tezos_exchange : @storage
                    CAAAR;      # map string string : string : @parameter%request_tezos_exchange : @storage
                    SWAP;       # string : map string string : @parameter%request_tezos_exchange : @storage
                    MEM;        # bool : @parameter%request_tezos_exchange : @storage
                    IF
                      {}
                      {
                        PUSH string "Invalid Crypto!"; # string : @parameter%request_tezos_exchange : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%request_tezos_exchange : @storage
                  }; # @parameter%request_tezos_exchange : @storage
                SWAP;       # @storage : @parameter%request_tezos_exchange
                # sp.verify(~ (self.data.open_pool.contains(params.key)), message = 'Key Exists!') # @storage : @parameter%request_tezos_exchange
                DUP;        # @storage : @storage : @parameter%request_tezos_exchange
                DUG 2;      # @storage : @parameter%request_tezos_exchange : @storage
                CDAAR;      # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : @parameter%request_tezos_exchange : @storage
                SWAP;       # @parameter%request_tezos_exchange : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : @storage
                DUP;        # @parameter%request_tezos_exchange : @parameter%request_tezos_exchange : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : @storage
                DUG 2;      # @parameter%request_tezos_exchange : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : @parameter%request_tezos_exchange : @storage
                CDDR;       # string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : @parameter%request_tezos_exchange : @storage
                MEM;        # bool : @parameter%request_tezos_exchange : @storage
                IF
                  {
                    PUSH string "Key Exists!"; # string : @parameter%request_tezos_exchange : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @parameter%request_tezos_exchange : @storage
                SWAP;       # @storage : @parameter%request_tezos_exchange
                # self.data.open_pool[params.key] = sp.record(amount = params.amount, cryptos = params.cryptos, dips = sp.list([]), timelock = sp.add_seconds(sp.now, ((self.data.min_lock * 24) * 60) * 60), timestamp = sp.now) # @storage : @parameter%request_tezos_exchange
                DUP;        # @storage : @storage : @parameter%request_tezos_exchange
                DUG 2;      # @storage : @parameter%request_tezos_exchange : @storage
                DUP;        # @storage : @storage : @parameter%request_tezos_exchange : @storage
                CAR;        # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage : @parameter%request_tezos_exchange : @storage
                SWAP;       # @storage : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                CDR;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                DUP;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                CDR;        # pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                SWAP;       # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                CAR;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                DUP;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                CDR;        # map address string : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                SWAP;       # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                CAR;        # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                DIG 4;      # @parameter%request_tezos_exchange : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage
                DUP;        # @parameter%request_tezos_exchange : @parameter%request_tezos_exchange : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage
                DUG 5;      # @parameter%request_tezos_exchange : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                CDDR;       # string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                NOW;        # timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                NOW;        # timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                PUSH int 60; # int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                DUP;        # int : int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                PUSH int 24; # int : int : int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange : @storage
                DIG 11;     # @storage : int : int : int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                CADDR;      # int : int : int : int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                MUL;        # int : int : int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                MUL;        # int : int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                MUL;        # int : timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                ADD;        # timestamp : timestamp : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                PAIR %timelock %timestamp; # pair (timestamp %timelock) (timestamp %timestamp) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                NIL (pair (mutez %amount) (string %swap)); # list (pair (mutez %amount) (string %swap)) : pair (timestamp %timelock) (timestamp %timestamp) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                PAIR %dips; # pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_exchange
                DIG 6;      # @parameter%request_tezos_exchange : pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUP;        # @parameter%request_tezos_exchange : @parameter%request_tezos_exchange : pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                CDAR;       # map string string : @parameter%request_tezos_exchange : pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # @parameter%request_tezos_exchange : map string string : pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                CAR;        # mutez : map string string : pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR %amount %cryptos; # pair (mutez %amount) (map %cryptos string string) : pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SOME;       # option (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : string : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # string : option (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                UPDATE;     # map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp)))) : map address string : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)))
                PAIR;       # pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))))
              }; # @storage
          }
          {
            IF_LEFT
              {
                # == request_tezos_swap ==
                # for crypto in sp.list([params.crypto]): ... # @parameter%request_tezos_swap : @storage
                DUP;        # @parameter%request_tezos_swap : @parameter%request_tezos_swap : @storage
                CDAR;       # string : @parameter%request_tezos_swap : @storage
                NIL string; # list string : string : @parameter%request_tezos_swap : @storage
                SWAP;       # string : list string : @parameter%request_tezos_swap : @storage
                CONS;       # list string : @parameter%request_tezos_swap : @storage
                ITER
                  {
                    # sp.verify(self.data.accepted_cryptos.contains(crypto), message = 'Invalid Crypto!') # string : @parameter%request_tezos_swap : @storage
                    DIG 2;      # @storage : string : @parameter%request_tezos_swap
                    DUP;        # @storage : @storage : string : @parameter%request_tezos_swap
                    DUG 3;      # @storage : string : @parameter%request_tezos_swap : @storage
                    CAAAR;      # map string string : string : @parameter%request_tezos_swap : @storage
                    SWAP;       # string : map string string : @parameter%request_tezos_swap : @storage
                    MEM;        # bool : @parameter%request_tezos_swap : @storage
                    IF
                      {}
                      {
                        PUSH string "Invalid Crypto!"; # string : @parameter%request_tezos_swap : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%request_tezos_swap : @storage
                  }; # @parameter%request_tezos_swap : @storage
                SWAP;       # @storage : @parameter%request_tezos_swap
                # sp.verify(~ (self.data.swap_pool.contains(params.key)), message = 'Key Exists!') # @storage : @parameter%request_tezos_swap
                DUP;        # @storage : @storage : @parameter%request_tezos_swap
                DUG 2;      # @storage : @parameter%request_tezos_swap : @storage
                CDDDAR;     # big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : @parameter%request_tezos_swap : @storage
                SWAP;       # @parameter%request_tezos_swap : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : @storage
                DUP;        # @parameter%request_tezos_swap : @parameter%request_tezos_swap : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : @storage
                DUG 2;      # @parameter%request_tezos_swap : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : @parameter%request_tezos_swap : @storage
                CDDR;       # string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : @parameter%request_tezos_swap : @storage
                MEM;        # bool : @parameter%request_tezos_swap : @storage
                IF
                  {
                    PUSH string "Key Exists!"; # string : @parameter%request_tezos_swap : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @parameter%request_tezos_swap : @storage
                SWAP;       # @storage : @parameter%request_tezos_swap
                # self.data.swap_pool[params.key] = sp.record(address = params.address, amount = params.amount, crypto = params.crypto, swapped = False, swaps = sp.list([]), timelock = sp.add_seconds(sp.now, self.data.timelocks[params.crypto] * 60), timestamp = sp.now) # @storage : @parameter%request_tezos_swap
                DUP;        # @storage : @storage : @parameter%request_tezos_swap
                DUG 2;      # @storage : @parameter%request_tezos_swap : @storage
                DUP;        # @storage : @storage : @parameter%request_tezos_swap : @storage
                CAR;        # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage : @parameter%request_tezos_swap : @storage
                SWAP;       # @storage : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CDR;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                DUP;        # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CAR;        # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                SWAP;       # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int))) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CDR;        # pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                DUP;        # pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CAR;        # address : pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                SWAP;       # pair (address %spare) (pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int)) : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CDR;        # pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int) : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                DUP;        # pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int) : pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int) : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CDR;        # map string int : pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int) : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                SWAP;       # pair (big_map %swap_pool string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %timelocks string int) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CAR;        # big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                DIG 5;      # @parameter%request_tezos_swap : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage
                DUP;        # @parameter%request_tezos_swap : @parameter%request_tezos_swap : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @storage
                DUG 6;      # @parameter%request_tezos_swap : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                CDDR;       # string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                NOW;        # timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                NOW;        # timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                PUSH int 60; # int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap : @storage
                DIG 10;     # @storage : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                CDDDDR;     # map string int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                DIG 10;     # @parameter%request_tezos_swap : map string int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUP;        # @parameter%request_tezos_swap : @parameter%request_tezos_swap : map string int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUG 11;     # @parameter%request_tezos_swap : map string int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                CDAR;       # string : map string int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                GET;        # option int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                IF_SOME
                  {
                    # of_some: Get-item:97 # @some : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                  }
                  {
                    PUSH int 97; # int : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                    FAILWITH;   # FAILED
                  }; # @some : int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                MUL;        # int : timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                ADD;        # timestamp : timestamp : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                PAIR %timelock %timestamp; # pair (timestamp %timelock) (timestamp %timestamp) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                PUSH (pair (bool %swapped) (list %swaps string)) (Pair False {}); # pair (bool %swapped) (list %swaps string) : pair (timestamp %timelock) (timestamp %timestamp) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                PAIR;       # pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                DIG 7;      # @parameter%request_tezos_swap : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUP;        # @parameter%request_tezos_swap : @parameter%request_tezos_swap : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                CDAR;       # string : @parameter%request_tezos_swap : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # @parameter%request_tezos_swap : string : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUP;        # @parameter%request_tezos_swap : @parameter%request_tezos_swap : string : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                DUG 9;      # @parameter%request_tezos_swap : string : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                CADR;       # mutez : string : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                PAIR %amount %crypto; # pair (mutez %amount) (string %crypto) : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : @parameter%request_tezos_swap
                DIG 8;      # @parameter%request_tezos_swap : pair (mutez %amount) (string %crypto) : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                CAAR;       # address : pair (mutez %amount) (string %crypto) : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR %address; # pair (address %address) (pair (mutez %amount) (string %crypto)) : pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SOME;       # option (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : string : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # string : option (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                UPDATE;     # big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp)))) : map string int : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int) : address : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # address : pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair address (pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int)) : pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string) : pair address (pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int)) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                PAIR;       # pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair address (pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int))) : pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))
                SWAP;       # pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock)) : pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair address (pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int)))
                PAIR;       # pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair address (pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int))))
              }
              {
                DROP;       # @storage
                # == update_pool ==
                # sp.verify(self.data.oracles.contains(sp.sender), message = 'Invalid Oracle!') # @storage
                DUP;        # @storage : @storage
                CDADR;      # map address string : @storage
                SENDER;     # address : map address string : @storage
                MEM;        # bool : @storage
                IF
                  {}
                  {
                    PUSH string "Invalid Oracle!"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
              }; # pair (pair (pair (map %accepted_cryptos string string) (address %admin)) (pair (big_map %closed_pool (missing_type_conversion "Unknown Type") (missing_type_conversion "Unknown Type")) (int %min_lock))) (pair (pair (map %open_pool string (pair (pair (mutez %amount) (map %cryptos string string)) (pair (list %dips (pair (mutez %amount) (string %swap))) (pair (timestamp %timelock) (timestamp %timestamp))))) (map %oracles address string)) (pair address (pair (big_map string (pair (pair (address %address) (pair (mutez %amount) (string %crypto))) (pair (pair (bool %swapped) (list %swaps string)) (pair (timestamp %timelock) (timestamp %timestamp))))) (map string int))))
          }; # @storage
      }; # @storage
    NIL operation; # list operation : @storage
    PAIR;       # pair (list operation) @storage
  };
